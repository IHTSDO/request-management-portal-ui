<form (ngSubmit)="submitRequest()" #requestForm="ngForm">
    <div class="row">
        <div class="offset-1 col-10 p-3 mb-3 form-group">
            <label for="summary">{{ 'form.summary' | translate }}</label>
            <span *ngIf="request.summary?.length > 0" class="float-end">{{255 - request.summary?.length}} {{ 'form.charactersLeft' | translate }}</span>
            <input type="text" class="form-control" id="summary" maxlength="255" required [(ngModel)]="request.summary" name="summary" #summary="ngModel" matTooltip="{{ 'tooltip.summary' | translate }}">
            <div [hidden]="summary.valid || summary.pristine" class="alert alert-danger">{{ 'required.summary' | translate }}</div>
        </div>
    </div>
    <div class="row">
        <div class="offset-1 col-10 p-3 mb-0 form-group">
            <label for="concept">{{ 'form.concept' | translate }}</label>
            <div class="input-group">
                <input type="text" class="form-control" id="concept" [(ngModel)]="request.concept" name="concept" [ngbTypeahead]="search" (selectItem)="populateConceptFields($event)" placeholder="{{ 'form.placeholder' | translate }}" matTooltip="{{ 'tooltip.concept' | translate }}">
                <span class="input-group-text"><i class="fas fa-search"></i></span>
            </div>
        </div>
        <div class="offset-1 col-5 p-3 mb-3 form-group">
            <label for="conceptId">{{ 'form.conceptID' | translate }}</label>
            <input type="text" class="form-control" id="conceptId" required [(ngModel)]="request.conceptId" name="conceptId" #conceptId="ngModel" matTooltip="{{ 'tooltip.conceptID' | translate }}">
            <div [hidden]="conceptId.valid || conceptId.pristine" class="alert alert-danger">{{ 'require.conceptID' | translate }}</div>
        </div>
        <div class="col-5 p-3 mb-3 form-group">
            <label for="conceptName">{{ 'form.conceptName' | translate }}</label>
            <input type="text" class="form-control" id="conceptName" required [(ngModel)]="request.conceptName" name="conceptName" #conceptName="ngModel" matTooltip="{{ 'tooltip.conceptName' | translate }}">
            <div [hidden]="conceptName.valid || conceptName.pristine" class="alert alert-danger">{{ 'require.conceptName' | translate }}</div>
        </div>
        <div class="offset-1 col-5 p-3 mb-3 form-group">
            <label for="relationshipType">{{ 'form.relationshipType' | translate }}</label>
            <select class="form-control" id="relationshipType" required [(ngModel)]="request.relationshipType" name="relationshipType" #relationshipType="ngModel" matTooltip="{{ 'tooltip.relationshipType' | translate }}">
                <option value="Is a">{{ 'relationshipType.isA' | translate }}</option>
                <option value="Associated Morphology">{{ 'relationshipType.associatedMorphology' | translate }}</option>
                <option value="Finding Site">{{ 'relationshipType.findingSite' | translate }}</option>
                <option value="Procedure Site">{{ 'relationshipType.procedureSite' | translate }}</option>
                <option value="Unknown">{{ 'relationshipType.unknown' | translate }}</option>
                <option value="Other">{{ 'relationshipType.other' | translate }}</option>
            </select>
            <div [hidden]="relationshipType.valid || relationshipType.pristine" class="alert alert-danger" i18n>{{ 'required.relationshipType' | translate }}</div>
        </div>
        <div class="col-5 p-3 mb-0 form-group">
            <label for="newRelationship">{{ 'form.relationshipTarget' | translate }}</label>
            <div class="input-group">
                <input type="text" class="form-control" id="newRelationship" required [(ngModel)]="request.newRelationship" name="newRelationship" [ngbTypeahead]="search" #newRelationship="ngModel" placeholder="{{ 'form.placeholder' | translate }}" matTooltip="{{ 'tooltip.relationshipTarget' | translate }}">
                <span class="input-group-text"><i class="fas fa-search"></i></span>
            </div>
            <div [hidden]="newRelationship.valid || newRelationship.pristine" class="alert alert-danger" i18n>{{ 'required.relationshipTarget' | translate }}</div>
        </div>
    </div>
    <div class="form-break mb-2"></div>
    <div class="row">
        <div class="offset-1 col-10 p-3 mb-0 form-group">
            <label for="justification">{{ 'form.justification' | translate }}</label>
            <span *ngIf="request.justification?.length > 0" class="float-end"><ng-container *ngIf="request.justification?.length > 32512">{{32767 - request.justification?.length}} {{ 'form.charactersLeft' | translate }}</ng-container></span>
            <textarea type="text" class="form-control" id="justification" maxlength="32767" [(ngModel)]="request.justification" name="justification" matTooltip="{{ 'tooltip.justification' | translate }}"></textarea>
        </div>
        <div class="offset-1 col-10 p-3 mb-0 form-group">
            <label for="reference">{{ 'form.reference' | translate }}</label>
            <span *ngIf="request.reference?.length > 0" class="float-end">{{255 - request.reference?.length}} {{ 'form.charactersLeft' | translate }}</span>
            <textarea type="text" class="form-control" id="reference" maxlength="255" [(ngModel)]="request.reference" name="reference" matTooltip="{{ 'tooltip.reference' | translate }}"></textarea>
        </div>
    </div>
    <div class="text-end">
        <button type="button" class="btn btn-secondary p-3 px-5" (click)="requestForm.reset()">{{ 'form.reset' | translate | uppercase}}</button>
        <button type="submit" class="btn btn-success p-3 px-5 m-5" [disabled]="!requestForm.form.valid">{{ 'form.submit' | translate | uppercase}}</button>
    </div>
</form>
